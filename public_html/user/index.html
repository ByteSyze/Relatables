<!DOCTYPE html>
<!-- Copyright (C) Tyler Hackett 2014 -->
<html>
	<?php 
		require $_SERVER['DOCUMENT_ROOT'] . '/global.php';
		
		$username = $_GET['username'];
		
		//If username ends in a /, remove it.
		$slashpos = strpos($username,'/');
		
		if($slashpos != false)
			$username = substr($username,0,$slashpos);
		
		$user = new User($username);
	?>
	<head>
		<title id='title'><?php echo $user->getUsername(); ?></title>
		
		<?php 
			GlobalUtils::getMeta();
			GlobalUtils::getCSS('submissiontheme');
		?>
		
		<link rel="canonical" href="http://www.relatablez.com/">
	</head>
	<body style='margin:0px;'>
		<?php require($_SERVER['DOCUMENT_ROOT']."/navigation.php"); ?>
	
		<div class="user-jumbo">
			<div class="grid wrap">
				<div class="unit whole">
					<span class="username"><?php echo $user->getUsername(); ?></span>
					<?php if($user->isAdmin()) { echo '<span class="admin">(Admin)</span>';} ?>
					<span class="user-info user-description"><?php echo htmlspecialchars($user->getDescription()); ?></span>
					<hr>
					<span class="user-info">From  <?php echo $user->getCountry(); ?></span>
					<span class="user-info">Joined on <?php echo $user->getJoined(); ?></span>
				</div>
			</div>
		</div>
		
		<div class="grid wrap wider">
			<div class="unit two-thirds">
				<h3>Related With</h3>
				<div class="boxes">
					<?php
						if(!$user->getHideRelated())
						{
							foreach($user->getRelated() as $related)
								$related->format();
						}
					?>	
				</div>
			</div>
			<div class="unit one-third">
				<h3>Stats</h3>
				<div class="boxes">
					<div class="box user-stats">
						<div class="box-content">
							<span><b>Posts:</b> <?php echo $user->getPostCount(); ?></span>
							<span><b>Comments:</b> <?php echo $user->getCommentCount(); ?></span>
							<span><b>Moderated:</b> <?php echo $user->getModerationIndex(); ?></span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<?php GlobalUtils::getJS(); ?>
	</body>
</html>