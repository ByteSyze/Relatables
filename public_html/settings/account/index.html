<!DOCTYPE html>
<!-- Copyright (C) Tyler Hackett 2014-->
<?php 
	require $_SERVER['DOCUMENT_ROOT'] . '/global.php';
	
	if($_SESSION['id'] == null)
	{
		header('Location: /');
		exit;
	}
?>
<html>
	<head>
		<title>Account Settings</title>	
	
		<?php
			GlobalUtils::getMeta();
			GlobalUtils::getCSS('settings/theme');
		?>
		
		<link rel="canonical" href="/">
	</head>
	<body>
		<div class="content-wrapper">
			<?php require($_SERVER["DOCUMENT_ROOT"] . '/navigation.php'); ?>
			<div class="content">
				<div class="page-jumbo">
				  <div class="grid wrap">
					<div class="unit whole">
					  <h1 class="page-title">Account Settings</h1>
					</div>
				  </div>
				</div>
				<div class="grid wrap wider">
					<?php include "../settingsnav.php" ?>
					<div class="unit three-fourths">
						<div class="box">
							<div class="box-content">
								<form id='settings-form' method='POST' action='/update.php' class="vertical">
									<input type='hidden' name='t' value='account' />
									<label for="">Username <img onmouseover='showErrors(this)' onmouseout='hideErrors(this)' class='verify' src='/check_mark.png' id='user_verify_img' /><div class='popup-offset'><div class='error-popup' id='username-popup'></div></div></label>
									<input type="text" id='user_input' name='username' onkeydown='checkLimit(event,this,32,false);' onkeyup='verifyUser();checkHideErrors(this, user_verify_img);' placeholder='<?php echo GlobalUtils::$user->getUsername(); ?>'></input>

									<label for="currentpass_input">Current Password <img onmouseover='showErrors(this)' onmouseout='hideErrors(this)' class='verify' src='/check_mark.png' id='currentpass_verify_img' /><div class='popup-offset'><div class='error-popup' id='current-password-popup'></div></div></label>
									<input type="password" id='currentpass_input' type='password' name='oldpassword' autocomplete='off' />

									<label for="">New Password <img onmouseover='showErrors(this)' onmouseout='hideErrors(this)' class='verify' src='/check_mark.png' id='repass_verify_img' /><div class='popup-offset'><div class='error-popup' id='new-password-popup'></div></div></label>
									<input id='pass_input' type="password" name='newpassword' onkeyup='verifyPassword();checkHideErrors(this, pass_verify_img);' autocomplete='off' />
									
									<label for="">Retype New Password <img onmouseover='showErrors(this)' onmouseout='hideErrors(this)' class='verify' src='/check_mark.png' id='repass_verify_img' /><div class='popup-offset'><div class='error-popup' id='renew-password-popup'></div></div></label>
									<input id='repass_input' type='password' name='renewpassword' onkeyup='verifyRePassword()'  autocomplete='off' />

									<label for="">Email <img onmouseover='showErrors(this)' onmouseout='hideErrors(this)' class='verify' src='/check_mark.png' id='email_verify_img' /><div class='popup-offset'><div class='error-popup' id='email-popup'></div></div></label>
									<input id='email_input' name='email' onkeydown='checkLimit(event,this,32,false);' onkeyup='verifyEmail();checkHideErrors(this, email_verify_img);' placeholder='<?php echo GlobalUtils::$user->getEmail(); ?>'></input>
									<input class="button blue-hover" id='save-button' type='submit' value='Save Settings' />
								</form><br>
								<div class="buttons">
									<a class="button red-hover" id='delete-button' data-togg='#delete-account-popup'>Delete Account</a>
								</div>
								
								<div id='delete-account-popup' class='popup'>
									<h2>Delete account?</h2>
									<form method='POST' action='/update.php'>
										<input type='hidden' name='t' value='delete'>
										<input class='dialoguebutton' style='float:left' type='submit' value='Confirm'>
										<input class='dialoguebutton' style='float:right' type='button' value='Cancel' data-hide='#delete-account-popup'>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>	
			</div>
			<?php GlobalUtils::getFooter(); ?>
			
		</div>
		
		<?php GlobalUtils::getJS('settings/settings'); ?>
	</body>
</html>